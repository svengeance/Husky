---
  name: Husky App # Initial app metadata is set at the top
  version: 0.1
  publisher: Svengeance
  dependencies: # Dependencies that Husky can track are explicitly stated
      - DotNetCore>=5.0
  variables: # Global constant values the user can set up top
      installDir: '{folders.ProgramFiles}/HuskyApp'

  jobs: # A single job can exist without an explicitly declared stage
      show-splash:
          steps:
              show-unix-splash:
                platforms:
                  - Linux
                  - OSX
                  - FreeBSD
                task: Scripting.ExecuteInlineScript
                with:
                  script: | # Unix-specific script
                    cls &&
                    echo Welcome to Husky-App! &&
                    read -n 1 -r -s -p $'Press any key to continue installation...\n'              

              show-windows-splash:
                platforms:
                  - Windows
                task: Scripting.ExecuteInlineScript
                with:
                  script: | # Windows (cmd) specific script
                    clear &&
                    echo Welcome to Husky-App! &&
                    pause
                
      extract-husky-app:
          steps:
              extract-files:
                task: Resources.ExtractBundledResource
                with:
                  resources: dist/program/**/* # standard file globbing pattern
                  targetDirectory: '{variables.installDir}'
                  clean: true # Clean the destination directory 

      create-launch-file:
          steps:
              create-launch-script:
                task: Scripting.CreateScriptFile # Create a platform-independent script file (.sh on linux, .bat on windows)
                with:
                  directory: '{variables.installDir}'
                  fileName: launch
                  script: dotnet Huskyapp.dll

              create-shortcut:
                task: Utilities.CreateShortcut # Create a platform-independent shortcut 
                with:
                  shortcutLocation: '{folders.Desktop}'
                  shortcutName: 'HuskyApp'
                  target: '{variables.create-launch-file.create-launch-script.createdFileName}' # Retrieve variable from prior step